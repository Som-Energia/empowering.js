<html lang="en">
<script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="bower_components/handlebars/handlebars.min.js"></script>
<script type="text/javascript" src="bower_components/underscore/underscore.js"></script>
<script type="text/javascript" src="bower_components/backbone/backbone.js"></script>
<script type="text/javascript" src="bower_components/backform/src/backform.js"></script>
<script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" charset="utf-8"/>
<script type="text/javascript" src="bower_components/d3/d3.min.js"></script>
<link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">

<script src="src/empowering.js" charset="utf-8"></script>
<link href="src/empowering.css" rel="stylesheet" type="text/css" charset="utf-8"/>

<div class="container">

    <h1>OT101</h1>
    <div id="chartdiv_ot101"></div>
    <div id="infodiv_ot101"></div>
    <div id="infocustdiv_ot101"></div>
    <h1>OT103</h1>
    <div id="chartdiv_ot103"></div>
    <h1>OT201</h1>
    <div id="chartdiv_ot201"></div>
    <h1>OT401</h1>
    <div id="chartdiv_ot401"></div>
    <h1>Curves horàries</h1>
    <div id="chartdiv_cch"></div>
    <button id="download_cch" type="button" class="btn btn-primary">Download CSV</button>
</div>
<script type="text/javascript">
    /* OT101 Example */

    var result_ot101 = '{'
              + '"contractId": "123457ABC",'
              + '"companyId": 1234567890,'
              + '"month": 201307,'
              + '"setup": "52234e386cb9fea66d5b2511",'
              + '"consumption": 114,'
              + '"averageEffConsumption": 172,'
              + '"averageConsumption": 300,'
              + '"diffAverageEffConsumption": -33,'
              + '"diffAverageConsumption": -61,'
              + '"numberCustomersEff": 1,'
              + '"numberCustomers": 244'
              + '}';
    Empowering.Graphics.OT101({
        container: "#chartdiv_ot101", data: result_ot101,
        info: "infodiv_ot101",
        infoCustomers: "infocustdiv_ot101",
        width: 600, labels: {0: 'Els teus veïns', 1: 'Tu', 2: 'Els teus veïns efficients'}
    });

    /* OT103 Example */

    var result_ot103 = [
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201307,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": null,
            "averageEffConsumption": 150,
            "averageConsumption": 287,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201308,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": null,
            "averageEffConsumption": 160,
            "averageConsumption": 290,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201309,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": null,
            "averageEffConsumption": 174,
            "averageConsumption": 302,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201310,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": null,
            "averageEffConsumption": 180,
            "averageConsumption": 314,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201311,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": null,
            "averageEffConsumption": 190,
            "averageConsumption": 320,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201312,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": null,
            "averageEffConsumption": 194,
            "averageConsumption": 340,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201401,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": 150,
            "averageEffConsumption": 200,
            "averageConsumption": 360,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201402,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": 160,
            "averageEffConsumption": 150,
            "averageConsumption": 300,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201403,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": 140,
            "averageEffConsumption": 133,
            "averageConsumption": 290,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201404,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": 120,
            "averageEffConsumption": 90,
            "averageConsumption": 160,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201405,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": 115,
            "averageEffConsumption": 130,
            "averageConsumption": 220,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201406,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": 160,
            "averageEffConsumption": 145,
            "averageConsumption": 229,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        },
        {
            "contractId": "123457ABC",
            "companyId": 1234567890,
            "month": 201407,
            "setup": "52234e386cb9fea66d5b2511",
            "consumption": 180,
            "averageEffConsumption": 130,
            "averageConsumption": 215,
            "numberCustomersEff": 1,
            "numberCustomers": 1
        }
    ];
    var gOT103 = Empowering.Graphics.OT103({
        container: "#chartdiv_ot103", data: JSON.stringify(result_ot103)
    });

    /* OT201 Example */

    var result_ot201 = {
      "actualConsumption": 152.61667,
      "contractId": "00085",
      "diffConsumption": 36.37,
      "month": 201501,
      "previousConsumption": 111.91228
    };
    Empowering.Graphics.OT201({
        container: "#chartdiv_ot201", data: result_ot201
    });

    var result_ot401 = [
        {
          "_updated":"1970-01-01T00:00:00Z",
          "companyId":3108188543,
          "tipId":117.0,
          "month":201504,
          "_links":{
             "self":{
                "href":"OT401Results/559ef284dfeb57703a80577e",
                "title":"Ot401result"
             }
          },
          "tipDescription":{
             "catalan":"Apagueu totalment els aparells com la TV o l'ordinador quan no els estigueu utilitzant",
             "spanish":"Desconecte aparatos como la TV o el ordenador cuando no los est\u00e9 utilizando"
          },
          "_created":"2015-07-09T22:15:32Z",
          "_id":"559ef284dfeb57703a80577e",
          "_etag":"33e69169254667ec4f43822ea3f8daf863134952",
          "contractId":"00133"
        },
        {
          "_updated":"1970-01-01T00:00:00Z",
          "companyId":3108188543,
          "tipId":133.0,
          "month":201504,
          "_links":{
             "self":{
                "href":"OT401Results/559ef284dfeb57703a80577f",
                "title":"Ot401result"
             }
          },
          "tipDescription":{
             "catalan":"Si teniu cuina el\u00e8ctrica, recordeu que podeu apagar els fogons dos o tres minuts abans de finalitzar el temps de cocci\u00f3 dels aliments: la cuina es mantindr\u00e0 calenta i els aliments acabaran de coure's correctament",
             "spanish":"Si tiene una cocina el\u00e9ctrica, recuerde que puede apagar los quemadores dos o tres minutos antes de finalizar el tiempo de cocci\u00f3n de los alimentos: la cocina se mantendr\u00e1 caliente y los alimentos terminar\u00e1n de cocerse correctamente"
          },
          "_created":"2015-07-09T22:15:32Z",
          "_id":"559ef284dfeb57703a80577f",
          "_etag":"a0f8b05b7ff4bf2c316dc6b240038b9f48354e36",
          "contractId":"00133"
        },
        {
          "_updated":"1970-01-01T00:00:00Z",
          "companyId":3108188543,
          "tipId":402.0,
          "month":201504,
          "_links":{
             "self":{
                "href":"OT401Results/559ef284dfeb57703a805780",
                "title":"Ot401result"
             }
          },
          "tipDescription":{
             "catalan":"Utilitzeu sensors de moviment en llums exteriors",
             "spanish":"Utilice sensores de movimiento en luces exteriores"
          },
          "_created":"2015-07-09T22:15:32Z",
          "_id":"559ef284dfeb57703a805780",
          "_etag":"0b06aa344d90ce5d292250b1e4f861fdc89175f2",
          "contractId":"00133"
        }
    ];

    Empowering.Graphics.OT401({
        container: '#chartdiv_ot401', data: result_ot401, locale: 'ca'
    });

    d3.json('cch.json', function(err, json) {
        console.log(json.length);
        cch = Empowering.Graphics.CCH({
            container: '#chartdiv_cch', data: json, locale: 'ca'
        });
        $('#download_cch').on('click', cch.downloadCSV);
    });

</script>

</html>